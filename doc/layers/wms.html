<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.1. Web Map Service Layers &mdash; OpenLayers Workshop</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.8.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="OpenLayers Workshop" href="../index.html" />
    <link rel="up" title="3. Layers and sources" href="index.html" />
    <link rel="next" title="3.2. Cached Tiles" href="cached.html" />
    <link rel="prev" title="3. Layers and sources" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="web-map-service-layers">
<span id="openlayers-layers-wms"></span><h1>3.1. Web Map Service Layers<a class="headerlink" href="#web-map-service-layers" title="Permalink to this headline">¶</a></h1>
<p>When you add a layer to your map, the layer&#8217;s source is typically responsible for
fetching the data to be displayed. The data requested can be either raster or
vector data. You can think of raster data as information rendered as an image on
the server side. Vector data is delivered as structured information from the
server and may be rendered for display on the client (your browser).</p>
<p>There are many different types of services that provide raster map data. This
section deals with providers that conform with the <abbr title="Open Geospatial Consortium, Inc.">OGC</abbr> <a class="reference external" href="http://www.opengeospatial.org/standards/wms">Web Map Service (WMS)</a> specification.</p>
<div class="section" id="creating-a-layer">
<h2>3.1.1. Creating a Layer<a class="headerlink" href="#creating-a-layer" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll start with a fully working map example and modify the layers to get an
understanding of how they work.</p>
<p>Let&#8217;s take a look at the following code:</p>
<div class="highlight-html" id="openlayers-layers-wms-example"><div class="highlight"><pre><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/ol.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;style&gt;</span>
      <span class="nf">#map</span> <span class="p">{</span>
        <span class="k">height</span><span class="o">:</span> <span class="m">256px</span><span class="p">;</span>
        <span class="k">width</span><span class="o">:</span> <span class="m">512px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/loader.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;title&gt;</span>OpenLayers 3 example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>My Map<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
      <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
        <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span>
        <span class="nx">layers</span><span class="o">:</span> <span class="p">[</span>
          <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
            <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Global Imagery&quot;</span><span class="p">,</span>
            <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
              <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://maps.opengeo.org/geowebcache/service/wms&#39;</span><span class="p">,</span>
              <span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">LAYERS</span><span class="o">:</span> <span class="s1">&#39;bluemarble&#39;</span><span class="p">,</span> <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.1.1&#39;</span><span class="p">}</span>
            <span class="p">})</span>
          <span class="p">})</span>
        <span class="p">],</span>
        <span class="nx">view</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
          <span class="nx">projection</span><span class="o">:</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
          <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
          <span class="nx">zoom</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">0.703125</span>
        <span class="p">})</span>
      <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p class="rubric">Tasks</p>
<ol class="arabic simple">
<li>If you haven&#8217;t already done so, save the text above as <code class="docutils literal"><span class="pre">map.html</span></code> in the
root of your workshop directory.</li>
<li>Open the page in your browser to confirm things work:
<a class="reference external" href="http://localhost:3000/map.html">http://localhost:3000/map.html</a></li>
</ol>
</div>
<div class="section" id="the-ol-layer-tile-constructor">
<h2>3.1.2. The ol.layer.Tile Constructor<a class="headerlink" href="#the-ol-layer-tile-constructor" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ol.layer.Tile</span></code> constructor gets an object literal of type <code class="docutils literal"><span class="pre">olx.layer.TileOptions</span></code> see: <a class="reference external" href="http://openlayers.org/en/master/apidoc/ol.layer.Tile.html">http://openlayers.org/en/master/apidoc/ol.layer.Tile.html</a>
In this case we are providing the source key of the options with an <code class="docutils literal"><span class="pre">ol.source.TileWMS</span></code>.
A human-readable title for the layer can be provided with the title key, but basically any arbitrary name for the key can be used here.
In OpenLayers 3 there is a separation between layers and sources, whereas in OpenLayers 2 this was all part of the layer.</p>
<p><code class="docutils literal"><span class="pre">ol.layer.Tile</span></code> represents a regular grid of images, <code class="docutils literal"><span class="pre">ol.layer.Image</span></code> represents a single image. Depending on the layer type, you would use a different source (<code class="docutils literal"><span class="pre">ol.source.TileWMS</span></code> versus <code class="docutils literal"><span class="pre">ol.source.ImageWMS</span></code>) as well.</p>
</div>
<div class="section" id="the-ol-source-tilewms-constructor">
<h2>3.1.3. The ol.source.TileWMS Constructor<a class="headerlink" href="#the-ol-source-tilewms-constructor" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ol.source.TileWMS</span></code> constructor has a single argument which is defined by: <a class="reference external" href="http://openlayers.org/en/master/apidoc/ol.source.TileWMS.html">http://openlayers.org/en/master/apidoc/ol.source.TileWMS.html</a>.
The url is the online resource of the WMS service, and params is an object literal with the parameter names and their values. Since the default WMS version is 1.3.0 now in OpenLayers, you might need to provide a lower version in the params if your WMS does not support WMS 1.3.0.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">layers</span><span class="o">:</span> <span class="p">[</span>
  <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Global Imagery&quot;</span><span class="p">,</span>
    <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://maps.opengeo.org/geowebcache/service/wms&#39;</span><span class="p">,</span>
      <span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">LAYERS</span><span class="o">:</span> <span class="s1">&#39;bluemarble&#39;</span><span class="p">,</span> <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.1.1&#39;</span><span class="p">}</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">]</span>
</pre></div>
</div>
<p class="rubric">Tasks</p>
<ol class="arabic">
<li><p class="first">This same WMS offers a layer named <code class="docutils literal"><span class="pre">&quot;openstreetmap&quot;</span></code>. Change the value of
the <code class="docutils literal"><span class="pre">LAYERS</span></code> parameter from <code class="docutils literal"><span class="pre">&quot;bluemarble&quot;</span></code> to <code class="docutils literal"><span class="pre">&quot;openstreetmap&quot;</span></code>.</p>
<p>Your revised ol.layer.Tile Constructor should look like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Global Imagery&quot;</span><span class="p">,</span>
  <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://maps.opengeo.org/geowebcache/service/wms&#39;</span><span class="p">,</span>
    <span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">LAYERS</span><span class="o">:</span> <span class="s1">&#39;openstreetmap&#39;</span><span class="p">,</span> <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.1.1&#39;</span><span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
</pre></div>
</div>
</li>
<li><p class="first">Change your layer and source to have a single image instead of tiles. Look at the following API doc pages for hints: <a class="reference external" href="http://openlayers.org/en/master/apidoc/ol.layer.Image.html">http://openlayers.org/en/master/apidoc/ol.layer.Image.html</a> and <a class="reference external" href="http://openlayers.org/en/master/apidoc/ol.source.ImageWMS.html">http://openlayers.org/en/master/apidoc/ol.source.ImageWMS.html</a>. During this process you will need to change the url (into <a class="reference external" href="http://suite.opengeo.org/geoserver/wms">http://suite.opengeo.org/geoserver/wms</a>) and the layer name (into <code class="docutils literal"><span class="pre">opengeo:countries</span></code>) as well. Use the Network tab of your browser&#8217;s developer tools to make sure a single image is requested and not 256x256 pixel tiles.</p>
</li>
</ol>
<div class="figure" id="id1">
<img alt="../_images/wms1.png" src="../_images/wms1.png" />
<p class="caption"><span class="caption-text">A map displaying the <code class="docutils literal"><span class="pre">&quot;openstreetmap&quot;</span></code> layer as <code class="docutils literal"><span class="pre">&quot;image/png&quot;</span></code>.</span></p>
</div>
<p>Having worked with dynamically rendered data from a Web Map Service, let&#8217;s move
on to learn about <a class="reference internal" href="cached.html#openlayers-layers-cached"><span>cached tile services</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">OpenLayers Workshop</a></h1>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">1. Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/index.html">2. Basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">3. Layers and sources</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">3.1. Web Map Service Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-layer">3.1.1. Creating a Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ol-layer-tile-constructor">3.1.2. The ol.layer.Tile Constructor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ol-source-tilewms-constructor">3.1.3. The ol.source.TileWMS Constructor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cached.html">3.2. Cached Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="proprietary.html">3.3. Proprietary Raster Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector.html">3.4. Vector Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="imagevector.html">3.5. Image Vector</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../controls/index.html">4. Controls and interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vector-style/index.html">5. Vector styling</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, OpenLayers Contributors.
      
    </div>

    

    
  </body>
</html>