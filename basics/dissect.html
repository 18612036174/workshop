<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2. Dissecting Your Map &mdash; OpenLayers Workshop</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenLayers Workshop" href="../index.html" />
    <link rel="up" title="1. Basics" href="index.html" />
    <link rel="next" title="1.3. OpenLayers Resources" href="resources.html" />
    <link rel="prev" title="1.1. Creating a Map" href="map.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="resources.html" title="1.3. OpenLayers Resources"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="map.html" title="1.1. Creating a Map"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">OpenLayers Workshop</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">1. Basics</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dissecting-your-map">
<span id="config-dissect"></span><h1>1.2. Dissecting Your Map<a class="headerlink" href="#dissecting-your-map" title="Permalink to this headline">¶</a></h1>
<p>As demonstrated in the <a class="reference internal" href="map.html#config-map"><em>previous section</em></a>, a map is generated by bringing together <a class="reference internal" href="#config-dissect-markup"><em>markup</em></a>, <a class="reference internal" href="#config-dissect-style"><em>style declarations</em></a>, and <a class="reference internal" href="#config-dissect-code"><em>initialization code</em></a>. We&#8217;ll look at each of these parts in a bit more detail.</p>
<div class="section" id="map-markup">
<span id="config-dissect-markup"></span><h2>1.2.1. Map Markup<a class="headerlink" href="#map-markup" title="Permalink to this headline">¶</a></h2>
<p>The markup for the map in the <a class="reference internal" href="map.html#config-map-example"><em>previous example</em></a> generates a single document element:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>This <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> element will serve as the container for our map viewport. Here we use a <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> element, but the container for the viewport can be any block-level element.</p>
<p>In this case, we give the container an <tt class="docutils literal"><span class="pre">id</span></tt> attribute so we can reference it as the target of our map.</p>
</div>
<div class="section" id="map-style">
<span id="config-dissect-style"></span><h2>1.2.2. Map Style<a class="headerlink" href="#map-style" title="Permalink to this headline">¶</a></h2>
<p>OpenLayers comes with a default stylesheet that specifies how map-related elements should be styled. We&#8217;ve explicitly included this stylesheet in the <tt class="docutils literal"><span class="pre">map.html</span></tt> page (<tt class="docutils literal"><span class="pre">&lt;link</span> <span class="pre">rel=&quot;stylesheet&quot;</span> <span class="pre">href=&quot;ol3/ol.css&quot;</span> <span class="pre">type=&quot;text/css&quot;&gt;</span></tt>).</p>
<p>OpenLayers doesn&#8217;t make any guesses about the size of your map. Because of this, following the default stylesheet, we need to include at least one custom style declaration to give the map some room on the page.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;ol3/ol.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;style&gt;</span>
  <span class="nf">#map</span> <span class="p">{</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">256px</span><span class="p">;</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">512px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</pre></div>
</div>
<p>In this case, we&#8217;re using the map container&#8217;s <tt class="docutils literal"><span class="pre">id</span></tt> value as a selector, and we specify the width (<tt class="docutils literal"><span class="pre">512px</span></tt>) and the height (<tt class="docutils literal"><span class="pre">256px</span></tt>) for the map container.</p>
<p>The style declarations are directly included in the <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> of our document. In most cases, your map related style declarations will be a part of a larger website theme linked in external stylesheets.</p>
</div>
<div class="section" id="map-initialization">
<span id="config-dissect-code"></span><h2>1.2.3. Map Initialization<a class="headerlink" href="#map-initialization" title="Permalink to this headline">¶</a></h2>
<p>The next step in generating your map is to include some initialization code. In our case, we have included a <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> element at the bottom of our document <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> to do the work:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">,</span>
    <span class="nx">layers</span><span class="o">:</span> <span class="p">[</span>
      <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
        <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
          <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://maps.opengeo.org/geowebcache/service/wms&#39;</span><span class="p">,</span>
          <span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">LAYERS</span><span class="o">:</span> <span class="s1">&#39;bluemarble&#39;</span><span class="p">,</span> <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.1.1&#39;</span><span class="p">}</span>
        <span class="p">})</span>
      <span class="p">})</span>
    <span class="p">],</span>
    <span class="nx">view</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
      <span class="nx">projection</span><span class="o">:</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
      <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
      <span class="nx">zoom</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">0.703125</span>
    <span class="p">})</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The order of these steps is important. Before our custom script can be executed, the OpenLayers library must be loaded. In our example, the OpenLayers library is loaded in the <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> of our document with <tt class="docutils literal"><span class="pre">&lt;script</span> <span class="pre">src=&quot;ol3/ol.js&quot;&gt;&lt;/script&gt;</span></tt>.</p>
<p class="last">Similarly, our custom map initialization code (above) cannot run until the document element that serves as the viewport container, in this case <tt class="docutils literal"><span class="pre">&lt;div</span> <span class="pre">id=&quot;map&quot;&gt;&lt;/div&gt;</span></tt>, is ready. By including the initialization code at the end of the document <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt>, we ensure that the library is loaded and the viewport container is ready before generating our map.</p>
</div>
<p>Let&#8217;s look in more detail at what the map initialization script is doing. Our script creates a new <tt class="docutils literal"><span class="pre">ol.Map</span></tt> object with a few config options:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;map&#39;</span>
</pre></div>
</div>
<p>We use the viewport container&#8217;s <tt class="docutils literal"><span class="pre">id</span></tt> attribute value to tell the map constructor where to render the map. In this case, we pass the string value <tt class="docutils literal"><span class="pre">&quot;map&quot;</span></tt> as the target to the map constructor. This syntax is a shortcut for convenience. We could be more explicit and provide a direct reference to the element (e.g. <tt class="docutils literal"><span class="pre">document.getElementById(&quot;map&quot;)</span></tt>).</p>
<p>The layers config creates a layer to be displayed in our map:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">layers</span><span class="o">:</span> <span class="p">[</span>
  <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
    <span class="nx">source</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">TileWMS</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://maps.opengeo.org/geowebcache/service/wms&#39;</span><span class="p">,</span>
      <span class="nx">params</span><span class="o">:</span> <span class="p">{</span><span class="nx">LAYERS</span><span class="o">:</span> <span class="s1">&#39;bluemarble&#39;</span><span class="p">,</span> <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.1.1&#39;</span><span class="p">}</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">],</span>
</pre></div>
</div>
<p>Don&#8217;t worry about the syntax here if this part is new to you. Layer creation will be covered in another module. The important part to understand is that our map view is a collection of layers. In order to see a map, we need to include at least one layer.</p>
<p>The final step is defining the view. We specify a projection, a center and a zoom level. We also specify a <cite>maxResolution</cite> to make sure we don&#8217;t request bounding boxes that GeoWebCache cannot handle.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">view</span><span class="o">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
   <span class="nx">projection</span><span class="o">:</span> <span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
   <span class="nx">center</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
   <span class="nx">zoom</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
   <span class="nx">maxResolution</span><span class="o">:</span> <span class="mf">0.703125</span>
<span class="p">})</span>
</pre></div>
</div>
<p>You&#8217;ve successfully dissected your first map! Next let&#8217;s <a class="reference internal" href="resources.html#config-resources"><em>learn more</em></a> about developing with OpenLayers.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2. Dissecting Your Map</a><ul>
<li><a class="reference internal" href="#map-markup">1.2.1. Map Markup</a></li>
<li><a class="reference internal" href="#map-style">1.2.2. Map Style</a></li>
<li><a class="reference internal" href="#map-initialization">1.2.3. Map Initialization</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="map.html"
                        title="previous chapter">1.1. Creating a Map</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="resources.html"
                        title="next chapter">1.3. OpenLayers Resources</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="resources.html" title="1.3. OpenLayers Resources"
             >next</a> |</li>
        <li class="right" >
          <a href="map.html" title="1.1. Creating a Map"
             >previous</a> |</li>
        <li><a href="../index.html">OpenLayers Workshop</a> &raquo;</li>
          <li><a href="index.html" >1. Basics</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, OpenLayers Contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>